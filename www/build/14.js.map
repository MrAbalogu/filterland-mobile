{"version":3,"sources":["../../src/pages/orders/orders.module.ts","../../src/pages/orders/orders.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrdersPage } from './orders';\n\n@NgModule({\n  declarations: [\n    OrdersPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrdersPage),\n  ],\n})\nexport class OrdersPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/orders/orders.module.ts","import { Component } from '@angular/core';\nimport { HttpResponse, HttpErrorResponse } from \"@angular/common/http\";\nimport { Storage } from '@ionic/storage';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { LogSaleService } from './../../providers/log_sale/log_sale'; \nimport { UtilProvider } from './../../providers/util/util';\nimport { TabsPage } from '../tabs/tabs';\nimport { SaleInvoiceModal } from '../sale_invoice/sale_invoice';\nimport { DashboardPage } from '../dashboard/dashboard';\n\nconst SALES = \"orders\";\n\n@IonicPage()\n@Component({\n  selector: 'orders-page',\n  templateUrl: 'orders.html',\n})\nexport class OrdersPage {\n  sales: any;\n  sales_in_storage: any;\n  today_total: number = 0;\n  week_total: number = 0;\n  user_id: any;\n  searchTerm: string = \"\";\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private utility: UtilProvider,\n    private storage: Storage,\n    private modalCtrl: ModalController,\n    private saleService: LogSaleService\n    ) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad OrdersPage');\n\n    this.storage.get(\"user\").then((u) => {\n      this.user_id = u.data.id;\n    });\n\n    this.storage.get(\"myresponse\").then((r) => {\n      if(r){\n        this.today_total = r.today_total;\n        this.week_total = r.week_total;\n      }\n    });\n\n    this.getSalesFromStorage();\n  }\n\n  setFilteredItems(searchTerm) {\n    console.log(this.searchTerm);\n    this.sales = this.sales_in_storage.filter((sale) => {\n      console.log(sale);\n      return sale.name.toLowerCase().indexOf(this.searchTerm.toLowerCase()) > -1;\n    });\n  }\n\n  getClass(i) {\n    if (i % 2 === 0){\n      return 'log_card';\n    } else {\n      return 'log_card_2';\n    }\n  }\n\n  viewInvoice(logDetails) {\n    let invoiceModal = this.modalCtrl.create(SaleInvoiceModal, logDetails);\n    invoiceModal.present();\n    console.log(logDetails.customer);\n  }\n\n  getSalesFromStorage() {\n    // var loading = this.utility.presentLoadingDefault(\"Fetching sales from Server ...\");\n    this.storage.get(SALES).then((sales) => {\n      if(sales){\n        // loading.dismiss();\n        this.sales = sales;\n        this.sales_in_storage = sales;\n      } else {\n        // loading.dismiss();\n        this.getSalesFromServer();\n      }\n      console.log(sales);\n    });\n  }\n\n  doRefresh(event) {\n    console.log(\"event: \", event);\n    this.getSalesFromServer();\n    \n    setTimeout(() => {\n      console.log('Async operation has ended');\n      event.complete();\n    }, 1000);\n  }\n\n  getSalesFromServer() {\n    var loading = this.utility.presentLoadingDefault(\"Fetching sales from Server ...\");\n    this.saleService.getRecentOrders(this.user_id)\n      .subscribe(\n        async (response: HttpResponse<any>) => {\n          var res = await response.body;\n          if (res.status === \"error\") {\n            console.log(\"error: \", res);\n            loading.dismiss();\n            return this.utility.showAlert(\n              \"Error\",\n              \"Something went wrong, Sales did not fetch from server\"\n            );\n          }\n          else {\n            console.log(\"response: \", res);\n            loading.dismiss();\n            this.storage.set(\"myresponse\", res);\n            this.storage.set(SALES, res.data);\n            this.navCtrl.push('OrdersPage');\n          } \n        },\n        (error: HttpErrorResponse) => {\n          loading.dismiss();\n          // console.log(error);\n          let message: string;\n          if(error.status === 500 || !error.error.errors){\n            message = \"There were problem, possible network or server errors, try again please.\";\n          }\n          else{\n            if(error.error.errors){\n              message = error.error.errors[0]\n            }\n          }\n          this.utility.showAlert( \"Error\", message );\n        }\n      );\n  }\n\n  goToDashboardPage(){\n    this.navCtrl.push(DashboardPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/orders/orders.ts"],"sourceRoot":""}