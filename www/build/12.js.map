{"version":3,"sources":["../../src/pages/recent_sales/recent_sales.module.ts","../../src/pages/recent_sales/recent_sales.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RecentSalesPage } from './recent_sales';\n\n@NgModule({\n  declarations: [\n    RecentSalesPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RecentSalesPage),\n  ],\n  entryComponents: [RecentSalesPage]\n})\nexport class RecentSalesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recent_sales/recent_sales.module.ts","import { Component } from '@angular/core';\nimport { HttpResponse, HttpErrorResponse } from \"@angular/common/http\";\nimport { Storage } from '@ionic/storage';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { LogSaleService } from './../../providers/log_sale/log_sale'; \nimport { UtilProvider } from './../../providers/util/util';\nimport { TabsPage } from '../tabs/tabs';\n\nconst SALES = \"sales\";\n\n@IonicPage()\n@Component({\n  selector: 'recent-sales',\n  templateUrl: 'recent_sales.html',\n})\nexport class RecentSalesPage {\n  sales: any;\n  sales_in_storage: any;\n  user_id: any;\n  searchTerm: string = \"\";\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private utility: UtilProvider,\n    private storage: Storage,\n    private saleService: LogSaleService\n    ) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad RecentSalesPage');\n    var nav = document.getElementById(\"searchNav\");\n    nav.style.display = \"none\";\n\n    this.storage.get(\"user\").then((u) => {\n      this.user_id = u.data.id;\n    });\n\n    this.getSalesFromStorage();\n  }\n\n  setFilteredItems(searchTerm) {\n    console.log(this.searchTerm);\n    this.sales = this.sales_in_storage.filter((sale) => {\n      console.log(sale);\n      return sale.name.toLowerCase().indexOf(this.searchTerm.toLowerCase()) > -1;\n    });\n  }\n\n  getSalesFromStorage() {\n    var loading = this.utility.presentLoadingDefault(\"Fetching sales from Server ...\");\n    this.storage.get(SALES).then((sales) => {\n      if(sales){\n        loading.dismiss();\n        this.sales = sales;\n        this.sales_in_storage = sales;\n      } else {\n        loading.dismiss();\n        this.getSalesFromServer();\n      }\n      console.log(sales);\n    });\n  }\n\n  doRefresh(event) {\n    console.log(\"event: \", event);\n    this.getSalesFromServer();\n    \n    setTimeout(() => {\n      console.log('Async operation has ended');\n      event.complete();\n    }, 1000);\n  }\n\n  getSalesFromServer() {\n    var loading = this.utility.presentLoadingDefault(\"Fetching sales from Server ...\");\n    this.saleService.getRecentSales(this.user_id)\n      .subscribe(\n        (response: HttpResponse<any>) => {\n          var res = response\n          if (res == \"error\") {\n            console.log(\"error: \", res);\n            loading.dismiss();\n            return this.utility.showAlert(\n              \"Error\",\n              \"Something went wrong, Sales did not fetch from server\"\n            );\n          }\n          else {\n            console.log(\"response: \", res);\n            loading.dismiss();\n            this.storage.set(SALES, res.data);\n            this.navCtrl.push('RecentSalesPage');\n          } \n        },\n        (error: HttpErrorResponse) => {\n          loading.dismiss();\n          // console.log(error);\n          let message: string;\n          if(error.status === 500 || !error.error.errors){\n            message = \"There were problem, possible network or server errors, try again please.\";\n          }\n          else{\n            if(error.error.errors){\n              message = error.error.errors[0]\n            }\n          }\n          this.utility.showAlert( \"Error\", message );\n        }\n      );\n  }\n\n  openSearchInput() {\n    var nav = document.getElementById(\"searchNav\");\n    var mainnav = document.getElementById(\"mainNav\");\n    mainnav.style.display = \"none\";\n    nav.style.display = \"block\";\n  }\n\n  goToTabsPage() {\n    this.navCtrl.push(\"TabsPage\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recent_sales/recent_sales.ts"],"sourceRoot":""}