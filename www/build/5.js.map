{"version":3,"sources":["../../src/pages/pending_logs/pending_logs.module.ts","../../src/pages/tabs/tabs.ts","../../src/pages/pending_logs/pending_logs.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PendingLogs } from './pending_logs';\n\n@NgModule({\n  declarations: [\n    PendingLogs,\n  ],\n  imports: [\n    IonicPageModule.forChild(PendingLogs),\n  ],\n  entryComponents: [PendingLogs]\n})\nexport class PendingLogsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pending_logs/pending_logs.module.ts","import { DashboardPage } from './../dashboard/dashboard';\nimport { Component } from '@angular/core';\nimport { OrdersPage } from '../orders/orders';\nimport { ProfilePage } from '../profile/profile';\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\n\n\n@IonicPage()\n@Component({\n  templateUrl: 'tabs.html'\n})\nexport class TabsPage {\n\n  tab1Root ='DashboardPage';\n  tab2Root = 'OrdersPage';\n  tab3Root = 'ProfilePage';   \n\n  myindex: number;\n\n  constructor(public navCtrl:NavController,public NavParams:NavParams) {\n    this.myindex =NavParams.data.tabindex\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { HttpResponse, HttpErrorResponse } from \"@angular/common/http\";\nimport { NavController, IonicPage, NavParams, ViewController, ModalController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { TabsPage } from '../tabs/tabs';\nimport { LogSaleService } from './../../providers/log_sale/log_sale'; \nimport { UtilProvider } from './../../providers/util/util';\nimport { ViewInvoiceModal } from '../view_invoice/view_invoice';\n\nconst SALELOGS = \"salelogs\";\n\n@IonicPage()\n@Component({\n  selector: 'pending-logs',\n  templateUrl: 'pending_logs.html'\n})\nexport class PendingLogs {\n  @ViewChild(\"internet_checker_indicator\") internetIndicator: ElementRef;\n  @ViewChild(\"logsCount\") logsCount: ElementRef;\n  user_id: any;\n  logs: any;\n  pending_logs: any = [];\n  parameters: any = {};\n  indicator_classes: any = {\n    'onlinebg': false,\n    'offlinebg': false\n  };\n  card_styles: any = {\n  \t'log_card': false,\n  \t'log_card_2': false \n  }\n  disableSyncButton: boolean = true;\n\n  constructor(\n  \tpublic navCtrl: NavController,\n    public navParams: NavParams, \n    public viewCtrl: ViewController,\n    private utility: UtilProvider,\n    private storage: Storage,\n    private modalCtrl: ModalController,\n    private logSaleService: LogSaleService\n    ) {}\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad PendingLogsPage');\n\n    this.storage.get(\"user\").then((u) => {\n      this.user_id = u.data.id;\n    });\n\n    this.storage.get(SALELOGS).then((logs) => {\n      this.logs = logs;\n      console.log(logs);\n    });\n\n    setInterval(() => { \n      // The code that you want to run repeatedly\n      if (!navigator.onLine) {\n        this.indicator_classes.offlinebg = true;\n        this.indicator_classes.onlinebg = false;\n        this.internetIndicator.nativeElement.innerHTML = \"Offline\";\n\n      } else {\n        this.indicator_classes.offlinebg = false;\n        this.indicator_classes.onlinebg = true;\n        this.internetIndicator.nativeElement.innerHTML = \"Online\";\n      }\n    }, 2000);\n\n  }\n\n  ionViewDidEnter() {\n    console.log(\"entered\");\n    if (this.logs){\n      this.logs.forEach((l) => {\n        console.log(JSON.parse(l));\n        this.pending_logs.push(JSON.parse(l));\n      });\n      if (navigator.onLine) {\n        this.disableSyncButton = false;\n      }\n      this.logsCount.nativeElement.innerHTML = this.logs.length;\n    } else {\n      this.disableSyncButton = true;\n    }\n  }\n\n  viewInvoice(logDetails) {\n    let invoiceModal = this.modalCtrl.create(ViewInvoiceModal, logDetails);\n    invoiceModal.present();\n    console.log(logDetails);\n  }\n\n  getClass(i) {\n  \tif (i % 2 === 0){\n  \t\treturn 'log_card';\n  \t} else {\n  \t\treturn 'log_card_2';\n  \t}\n  }\n\n  sendToServer(){\n  \tconsole.log(this.pending_logs);\n  }\n\n  goToTabsPage() {\n    this.navCtrl.setRoot(TabsPage);\n  }\n\n  syncFromStorageToServer() {\n    this.parameters.logs_array = this.pending_logs;\n    // console.log(\"params: \", JSON.stringify(sync_parameters));\n    var loading = this.utility.presentLoadingDefault(\"Syncing Logs to Server ...\");\n    this.logSaleService.syncSalesFromStorage(this.parameters)\n      .subscribe(\n        (response: HttpResponse<any>) => {\n          if (!response.ok) {\n            let res: any;\n            res = response;\n            loading.dismiss();\n            // console.log(response);\n            this.storage.remove(SALELOGS);\n            this.navCtrl.push('AddCustomerPage');\n            return this.utility.showAlert(\n              \"Completed and Saved\",\n              res.saved.length + \"Logs saved\"\n            );\n          }\n          else {\n            let res: any;\n            res = response;\n            loading.dismiss();\n            this.storage.remove(SALELOGS);\n            this.navCtrl.push('AddCustomerPage');\n            return this.utility.showAlert(\n              \"Completed and saved:\",\n              res.saved.length + \"Logs saved\"\n            );\n          }  \n        },\n        (error: HttpErrorResponse) => {\n          loading.dismiss();\n          // console.log(error);\n          let message: string;\n          if(error.status === 500 || !error.error.errors){\n            message = \"There were problem, possible network or server errors, try again please.\";\n          }\n          else{\n            if(error.error.errors){\n              message = error.error.errors[0]\n            }\n          }\n          this.utility.showAlert( \"Error\", message );\n        },\n        () => {\n          console.log(\"Completed\");\n        }\n      );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pending_logs/pending_logs.ts"],"sourceRoot":""}