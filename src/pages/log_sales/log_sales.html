<ion-header>
  <ion-navbar>
      <ion-buttons class="menu-left" start>
        <button class="start" ion-button ion-only menuToggle>
          <ion-icon name="menu"></ion-icon>
        </button>
      </ion-buttons>
      <div class="home-title title-center" >
        <ion-title >Log Sale</ion-title>
      </div>
      <ion-buttons class="logout-btn" end>
        <div class="indicator" [ngClass]="indicator_classes" #internet_checker_indicator>
          <ion-spinner class="check_network_spinner"></ion-spinner>
        </div>
      </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-grid>
    <form [formGroup]="logSaleForm" (ngSubmit)="viewInvoice(logSaleForm)">
      <ion-row>
        <ion-col>
          <label class="log_sale_label">Customer Full Name:</label>
          <input class="log_sale_input" placeholder="Full Name" type="text" formControlName="name" required/>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <label class="log_sale_label">Customer Phone Number:</label>
          <input class="log_sale_input" placeholder="Phone Number" type="text" formControlName="phone" required/>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <label class="log_sale_label">Customer Email:</label>
          <input class="log_sale_input" placeholder="Email Address" type="email" formControlName="email" required/>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <label class="log_sale_label">Customer Address:</label>
          <textarea class="log_sale_input" placeholder="Address" type="textarea" formControlName="address" required>
          </textarea>
        </ion-col>
      </ion-row>

      <div formArrayName="items" id="item" class="sale_item_container" *ngFor="let control of logSaleForm.get('items')?.controls; let i = index">
        <div formGroupName={{i}}>
          <div class="remove" (click)="remove_item(i)">
            remove
          </div>
          <ion-row>
            <ion-col size="3">
              <label class="log_sale_label">Product Name:</label>
              <input class="log_sale_input" placeholder="Product Name" formControlName="name" />
            </ion-col>

            <ion-col size="1" size-sm>
              <label class="log_sale_label">Part Number:</label>
              <input class="log_sale_input" placeholder="Part Number" formControlName="partnumber" />
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <label class="log_sale_label">Quantity:</label>
              <input class="log_sale_input" type="number" formControlName="quantity" (input)="calculateTotal()" />
            </ion-col>

            <ion-col>
              <label class="log_sale_label">Price:</label>
              <input class="log_sale_input" type="number" formControlName="price" (input)="calculateTotal()" />
            </ion-col>
          </ion-row>
        </div>
      </div>

      <button id="add_item" (click)="add_item()" type="button" ion-button size="small">+ Add more items</button>

      <ion-row>
        <ion-col>
          <label class="log_sale_label">Paid:</label>
            <input class="log_sale_input" type="number" formControlName="paid" required/>
        </ion-col>

        <ion-col>
          <label class="log_sale_label">Total:</label>
          <h4 style="margin:6px 0">{{ total }}</h4>
        </ion-col>
      </ion-row>

      <ion-row > 
        <ion-col>
        </ion-col>
        <ion-col>
          <button type="submit" ion-button class="secondary_button"> Save & View Invoice </button>
        </ion-col>
        <ion-col>
        </ion-col>
      </ion-row>

    </form>
  </ion-grid>



 
</ion-content>
